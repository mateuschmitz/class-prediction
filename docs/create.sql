-- MySQL Script generated by MySQL Workbench
-- Thu May 18 23:06:29 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema class-prediction
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema class-prediction
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `class-prediction` DEFAULT CHARACTER SET utf8 ;
USE `class-prediction` ;

-- -----------------------------------------------------
-- Table `class-prediction`.`classes`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`classes` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`classes` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(10) NOT NULL,
  `grade` TINYINT UNSIGNED NOT NULL,
  `created` DATETIME NOT NULL,
  `updated` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`academic_years`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`academic_years` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`academic_years` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `year` CHAR(4) NOT NULL,
  `start` DATE NULL,
  `end` DATE NULL,
  `created` DATETIME NOT NULL,
  `updated` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `year_UNIQUE` (`year` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`periods`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`periods` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`periods` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `academicYearId` INT UNSIGNED NOT NULL,
  `name` VARCHAR(15) NOT NULL,
  `start` DATETIME NOT NULL,
  `end` DATETIME NOT NULL,
  `created` DATETIME NOT NULL,
  `updated` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  INDEX `fk_periods_academic_years_idx` (`academicYearId` ASC),
  CONSTRAINT `fk_periods_academic_years`
    FOREIGN KEY (`academicYearId`)
    REFERENCES `class-prediction`.`academic_years` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`subjects`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`subjects` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`subjects` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `periodId` INT UNSIGNED NOT NULL,
  `name` VARCHAR(30) NOT NULL,
  `sunday` TINYINT UNSIGNED NULL DEFAULT 0,
  `monday` TINYINT UNSIGNED NULL DEFAULT 0,
  `tuesday` TINYINT UNSIGNED NULL DEFAULT 0,
  `wednesday` TINYINT UNSIGNED NULL DEFAULT 0,
  `thursday` TINYINT UNSIGNED NULL DEFAULT 0,
  `friday` TINYINT UNSIGNED NULL DEFAULT 0,
  `saturday` TINYINT UNSIGNED NULL DEFAULT 0,
  `created` DATETIME NOT NULL,
  `updated` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  INDEX `fk_subjects_periods1_idx` (`periodId` ASC),
  CONSTRAINT `fk_subjects_periods1`
    FOREIGN KEY (`periodId`)
    REFERENCES `class-prediction`.`periods` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`disciplinas_config`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`disciplinas_config` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`disciplinas_config` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`holidays`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`holidays` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`holidays` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `date` DATE NOT NULL,
  `created` DATETIME NOT NULL,
  `updated` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`extra_days`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`extra_days` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`extra_days` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `date` DATE NOT NULL,
  `created` DATETIME NOT NULL,
  `updated` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`users` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`users` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) NOT NULL,
  `pass` VARCHAR(60) NOT NULL,
  `email` VARCHAR(100) NOT NULL,
  `created` DATETIME NOT NULL,
  `updated` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`table1`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`table1` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`table1` (
)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`classes_has_periods`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`classes_has_periods` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`classes_has_periods` (
  `classeId` INT UNSIGNED NOT NULL,
  `periodId` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`classeId`, `periodId`),
  INDEX `fk_classes_has_periods_periods1_idx` (`periodId` ASC),
  INDEX `fk_classes_has_periods_classes1_idx` (`classeId` ASC),
  CONSTRAINT `fk_classes_has_periods_classes1`
    FOREIGN KEY (`classeId`)
    REFERENCES `class-prediction`.`classes` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_classes_has_periods_periods1`
    FOREIGN KEY (`periodId`)
    REFERENCES `class-prediction`.`periods` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`classes_has_subjects`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`classes_has_subjects` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`classes_has_subjects` (
  `classes_id` INT UNSIGNED NOT NULL,
  `subjects_id` INT UNSIGNED NOT NULL,
  `subjects_periodId` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`classes_id`, `subjects_id`, `subjects_periodId`),
  INDEX `fk_classes_has_subjects_subjects1_idx` (`subjects_id` ASC, `subjects_periodId` ASC),
  INDEX `fk_classes_has_subjects_classes1_idx` (`classes_id` ASC),
  CONSTRAINT `fk_classes_has_subjects_classes1`
    FOREIGN KEY (`classes_id`)
    REFERENCES `class-prediction`.`classes` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_classes_has_subjects_subjects1`
    FOREIGN KEY (`subjects_id` , `subjects_periodId`)
    REFERENCES `class-prediction`.`subjects` (`id` , `periodId`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `class-prediction`.`classes_has_subjects1`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `class-prediction`.`classes_has_subjects1` ;

CREATE TABLE IF NOT EXISTS `class-prediction`.`classes_has_subjects1` (
  `classeId` INT UNSIGNED NOT NULL,
  `subjectId` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`classeId`, `subjectId`),
  INDEX `fk_classes_has_subjects1_subjects1_idx` (`subjectId` ASC),
  INDEX `fk_classes_has_subjects1_classes1_idx` (`classeId` ASC),
  CONSTRAINT `fk_classes_has_subjects1_classes1`
    FOREIGN KEY (`classeId`)
    REFERENCES `class-prediction`.`classes` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_classes_has_subjects1_subjects1`
    FOREIGN KEY (`subjectId`)
    REFERENCES `class-prediction`.`subjects` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
